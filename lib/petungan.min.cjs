"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const r={BASE_JAWA:1555,BASE_GREGORIAN:1633,BASE_HIJRI:1043,INITIAL_DIFFERENCE:78,CYCLE_LENGTH:34,DIFFERENCE_DECAY:1,MIN_DIFFERENCE:1,HIJRI_OFFSET:512};function e(r,e,n){const t=Math.floor((14-e)/12),a=r+4800-t,o=e+12*t-3;return n+Math.floor((153*o+2)/5)+365*a+Math.floor(a/4)-Math.floor(a/100)+Math.floor(a/400)-32045}function n(r){const e=r+32044,n=Math.floor((4*e+3)/146097),t=e-Math.floor(146097*n/4),a=Math.floor((4*t+3)/1461),o=t-Math.floor(1461*a/4),i=Math.floor((5*o+2)/153),s=o-Math.floor((153*i+2)/5)+1,E=i+3-12*Math.floor(i/10);return{year:100*n+a-4800+Math.floor(i/10),month:E,day:s}}function t(r,e,n){return n+Math.ceil(29.5*(e-1))+354*(r-1)+Math.floor((3+11*r)/30)+1948439-1}function a(e){if("number"!=typeof e||!Number.isInteger(e))throw new Error("Invalid Javanese year: must be an integer");const{BASE_JAWA:n,INITIAL_DIFFERENCE:t,CYCLE_LENGTH:a,DIFFERENCE_DECAY:o,MIN_DIFFERENCE:i}=r;if(e===n)return r.BASE_GREGORIAN;const s=e-n;let E;if(s>=0){E=t-Math.floor(s/a)*o}else{E=t+Math.ceil(-s/a)*o}return e+Math.max(E,i)}function o(e){if("number"!=typeof e||!Number.isInteger(e))throw new Error("Invalid Gregorian year: must be an integer");if(e===r.BASE_GREGORIAN)return r.BASE_JAWA;let n=e-r.INITIAL_DIFFERENCE,t=0;for(;t<10;){const r=a(n)-e;if(0===r)return n;if(n-=r,t++,Math.abs(r)>1e3)throw new Error(`Conversion failed for Gregorian year ${e}: error too large`)}return n}function i(e){const n=[];let t=e,a=r.INITIAL_DIFFERENCE;for(let e=0;e<78;e++)n.push({konstan:Math.max(a,r.MIN_DIFFERENCE),tahunAwal:t,tahunAkhir:t+r.CYCLE_LENGTH-1}),a=Math.max(a-r.DIFFERENCE_DECAY,r.MIN_DIFFERENCE),t+=r.CYCLE_LENGTH;return n}function s(){return i(r.BASE_JAWA)}function E(){return i(r.BASE_GREGORIAN)}function u(e,n){try{const e=n>=1e3&&n<=3e3,t=n>=1600&&n<=4e3;let a;if(e&&!t){const e=n-r.BASE_JAWA,t=Math.floor(Math.abs(e)/r.CYCLE_LENGTH);a=e>=0?r.INITIAL_DIFFERENCE-t:r.INITIAL_DIFFERENCE+t}else{const e=n-r.BASE_GREGORIAN,t=Math.floor(Math.abs(e)/r.CYCLE_LENGTH);a=e>=0?r.INITIAL_DIFFERENCE-t:r.INITIAL_DIFFERENCE+t}a=Math.max(a,r.MIN_DIFFERENCE);const o=e?r.BASE_JAWA:r.BASE_GREGORIAN,i=n-o,s=Math.floor(Math.abs(i)/r.CYCLE_LENGTH);let E,u;return i>=0?(E=o+s*r.CYCLE_LENGTH,u=E+r.CYCLE_LENGTH-1):(u=o-s*r.CYCLE_LENGTH-1,E=u-r.CYCLE_LENGTH+1),{konstan:a,tahunAwal:E,tahunAkhir:u}}catch(r){return null}}const I=r.HIJRI_OFFSET,h=r.BASE_JAWA,c=r.BASE_HIJRI;exports.JAVANESE_CALENDAR_CONSTANTS=r,exports.cariTahunReferensi=u,exports.konversiJawaMasehiDirect=a,exports.konversiJawaMasehiPrecise=function(e){if("number"!=typeof e||!Number.isInteger(e))throw new Error("Invalid Javanese year: must be an integer");const{BASE_JAWA:a}=r;return e<a&&console.warn(`Warning: Javanese year ${e} is before calendar standardization (${a}). Conversion may not be historically accurate.`),n(t(e-r.HIJRI_OFFSET,1,1)).year},exports.konversiMasehiJawaDirect=o,exports.konversiMasehiJawaPrecise=function(a){if("number"!=typeof a||!Number.isInteger(a))throw new Error("Invalid Gregorian year: must be an integer");const o=e(a,1,1),i=function(r){const e=r-1948439+1,n=Math.floor((30*e+10646)/10631),a=t(n,1,1),o=Math.min(12,Math.ceil((r-a+1)/29.5));return{year:n,month:o,day:r-t(n,o,1)+1}}(o).year;for(let e=-2;e<=2;e++){const o=i+e;if(n(t(o,1,1)).year===a)return o+r.HIJRI_OFFSET}const s=e(a,12,31);let E=i,u=Number.POSITIVE_INFINITY;for(let r=i-3;r<=i+3;r++){const e=t(r,1,1),n=Math.max(0,Math.min(Math.abs(e-o),Math.abs(e-s)));n<u&&(u=n,E=r)}return E+r.HIJRI_OFFSET},exports.konversiTahunHijriyahKeTahunJawa=function(r){if("number"!=typeof r||!Number.isInteger(r))throw new Error("Invalid Hijri year: must be an integer");return r<c?(console.warn(`Warning: Hijri year ${r} is before Javanese calendar correlation (${c}). Conversion may not be historically accurate.`),r):r+I},exports.konversiTahunJawaKeTahunHijriyah=function(r){if("number"!=typeof r||!Number.isInteger(r))throw new Error("Invalid Javanese year: must be an integer");return r<h?(console.warn(`Warning: Javanese year ${r} is before calendar standardization (${h}). Conversion may not be historically accurate.`),r):r-I},exports.konversiTahunJawaKeTahunMasehi=function(r){try{return a(r)}catch(n){console.warn(`Direct conversion failed for ${r}, falling back to legacy method:`,n.message);let t=(e=r,u(s(),e));if(!t)throw new Error(`Cannot convert Javanese year ${r}: outside supported range`);return r+t.konstan}var e},exports.konversiTahunMasehiKeTahunJawa=function(r){try{return o(r)}catch(n){console.warn(`Direct conversion failed for ${r}, falling back to legacy method:`,n.message);let t=(e=r,u(E(),e));if(!t)throw new Error(`Cannot convert Gregorian year ${r}: outside supported range`);return r-t.konstan}var e},exports.tabelKonstantaKonversiTahunJawa=s,exports.tabelKonstantaKonversiTahunMasehi=E;
